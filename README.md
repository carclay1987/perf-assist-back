# Perf Assist - Интегрированное приложение

Это монорепозиторий, содержащий как фронтенд, так и бэкенд части приложения Perf Assist.

## Структура проекта

```
.
├── backend/          # Бэкенд на Go
│   ├── cmd/
│   ├── internal/
│   ├── migrations/
│   ├── scripts/
│   ├── Dockerfile
│   └── ...
├── frontend/         # Фронтенд на React/Vite
│   ├── src/
│   ├── package.json
│   ├── vite.config.mts
│   ├── Dockerfile
│   ├── nginx.conf
│   └── ...
├── docker-compose.yml # Основной файл для запуска всего приложения
└── README.md
```

## Запуск приложения

Для запуска всего приложения одной командой:

```bash
docker-compose up
```

После запуска приложение будет доступно по адресу: http://localhost:3001

Для доступа по локальному домену используйте: http://perf-assist.local:3001

### Доступ по локальному домену

Для доступа к приложению по локальному домену `http://perf-assist.local`:

1. Запустите скрипт setup-hosts.sh для автоматического добавления записи в /etc/hosts:
   ```bash
   ./setup-hosts.sh
   ```

2. После этого приложение будет доступно по адресу: http://perf-assist.local

Или вручную добавьте запись в файл `/etc/hosts`:
   ```
   127.0.0.1 perf-assist.local
   ```

**Примечание**: После добавления записи в /etc/hosts, браузер может кэшировать информацию о перенаправлении. Если вы сталкиваетесь с ошибкой 404 при доступе к http://localhost:3000, попробуйте:
- Очистить кэш браузера и cookies для localhost:3000
- Открыть приложение в режиме инкогнито
- Или использовать адрес http://perf-assist.local для доступа к приложению

Для остановки приложения используйте:

```bash
docker-compose down
```

## Архитектура

- **Фронтенд** (React/Vite) обслуживается nginx и доступен на порту 3001 (http://localhost:3001 или http://perf-assist.local:3001)
- **Бэкенд** (Go) доступен на порту 8081 и обрабатывает API запросы
- **База данных** (PostgreSQL) доступна на порту 5434

Фронтенд общается с бэкендом через `/api` endpoint, который проксируется nginx к бэкенду.

## Безопасность

Бэкенд настроен на использование CORS с разрешенными origins:
- `http://localhost:5173` (для локальной разработки с Vite)
- `http://localhost:3000` (для production-версии через nginx)
- `http://localhost` (для доступа по умолчанию)
- `http://perf-assist.local` (для доступа по локальному домену)

## Разработка

### Фронтенд

Для разработки фронтенда:

```bash
cd frontend
npm install
npm run dev
```

### Бэкенд

Для разработки бэкенда:

```bash
cd backend
go run cmd/api/main.go
